game.Loaded:Wait()

local HS = game:GetService("HttpService")
local TS = game:GetService("TeleportService")
local id = game.PlaceId

wait(300)

local best, maxp, cur = nil, 0, ""

for _ = 1, 6 do
    local u = "https://games.roblox.com/v1/games/"..id.."/servers/Public?sortOrder=Asc&limit=100"
    if cur ~= "" then u ..= "&cursor="..cur end

    local s,r = pcall(HS.GetAsync, HS, u)
    if not s then task.wait(1.5) continue end

    local d = HS:JSONDecode(r)
    for _,v in d.data do
        if v.id ~= game.JobId and v.playing < v.maxPlayers and v.playing > maxp then
            maxp = v.playing
            best = v
        end
    end

    cur = d.nextPageCursor or ""
    if cur == "" then break end
    task.wait(1.3)
end

if best then TS:TeleportToPlaceInstance(id, best.id) end
